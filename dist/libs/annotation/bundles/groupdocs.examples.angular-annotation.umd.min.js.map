{"version":3,"sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@groupdocs.examples.angular/annotation/lib/annotation-config.ts","ng://@groupdocs.examples.angular/annotation/lib/annotation-config.service.ts","ng://@groupdocs.examples.angular/annotation/lib/annotation.service.ts","ng://@groupdocs.examples.angular/annotation/lib/annotation-models.ts","ng://@groupdocs.examples.angular/annotation/lib/active-annotation.service.ts","ng://@groupdocs.examples.angular/annotation/lib/remove-annotation.service.ts","ng://@groupdocs.examples.angular/annotation/lib/comment-annotation.service.ts","ng://@groupdocs.examples.angular/annotation/lib/annotation/annotation.component.ts","ng://@groupdocs.examples.angular/annotation/lib/annotation-app.component.ts","ng://@groupdocs.examples.angular/annotation/lib/comment-panel/comment-panel.component.ts","ng://@groupdocs.examples.angular/annotation/lib/comment/comment.component.ts","ng://@groupdocs.examples.angular/annotation/lib/create-comment/create-comment.component.ts","ng://@groupdocs.examples.angular/annotation/lib/annotation.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__values","o","m","Symbol","iterator","i","call","next","length","value","done","AnnotationConfig","AnnotationConfigService","_http","_config","this","_annotationConfig","BehaviorSubject","_updatedConfig","asObservable","defineProperty","prototype","load","_this","Promise","resolve","reject","configEndpoint","getConfigEndpoint","Api","ANNOTATION_APP","get","httpOptionsJson","toPromise","then","response","annotationConfig","catch","JSON","stringify","Injectable","args","providedIn","HttpClient","ConfigService","AnnotationService","loadFiles","path","post","getAnnotationApiEndpoint","LOAD_FILE_TREE","loadFile","credentials","LOAD_DOCUMENT_DESCRIPTION","upload","file","url","rewrite","formData","FormData","append","String","UPLOAD_DOCUMENTS","loadPage","page","LOAD_DOCUMENT_PAGE","guid","password","getDownloadUrl","DOWNLOAD_DOCUMENTS","annotate","annotationsData","print","data","documentType","FileUtil","find","format","ANNOTATE","AnnotationType","getAnnotationType","id","TEXT","AREA","POINT","TEXT_STRIKEOUT","POLYLINE","TEXT_FIELD","WATERMARK","TEXT_REPLACEMENT","ARROW","TEXT_REDACTION","TEXT_UNDERLINE","DISTANCE","name","icon","_super","PageAnnotationModel","__","constructor","create","tslib_1.__extends","PageModel","Position","left","top","clone","position","Dimension","width","height","isNone","AnnotationData","text","fontColor","CommentAnnotation","Comment","time","Date","now","userName","comment","ret","RemoveAnnotation","ActiveAnnotationService","_observer","Subject","_activeChange","changeActive","annId","RemoveAnnotationService","_removeAnnotation","remove","CommentAnnotationService","_commentAnnotation","_observerAddComment","_addCommentObserve","addComment","$","jquery","AnnotationComponent","_activeAnnotationService","_removeAnnotationService","_commentAnnotationService","active","dimension","textValue","distanceValue","pointsValue","svgPath","formatting","Formatting","default","points","activeChange","subscribe","setTextFocus","isOnPage","currentPage","document","elementFromPoint","x","y","parent","hasClass","ngOnInit","leftTop","isPolyline","parsedPoints","replace","split","x_1","parseFloat","y_1","comp_1","forEach","point","index","addPoint","isPath","type","end","setEndPosition","getDistance","ngAfterViewInit","activation","$event","correctPosition","pageHeight","pageWidth","dragOver","preventDefault","stopPropagation","dragStart","oldPosition","Utils","getMousePosition","dataTransfer","setData","dragging","top_1","checkDragging","_b","tslib_1.__values","_c","endPosition","pathValue","getAnnotationClass","isStrikeoutOrUnderline","isTextReplacement","saveText","draw","calcPositionAndDimension","setStyles","stroke","stroke-width","fill-opacity","isDistance","class","Number","MAX_VALUE","rightBottom","MIN_VALUE","Math","min","max","calcDimensions","currentPosition","getHeight","undefined","abs","getWidth","isPoint","isSVG","distanceTextOptions","font-size","push","xs","ys","round","sqrt","bottom","window","location","head","getTextX","isText","getFormatting","f","fontSize","font","color","saveFormatting","getMenuShift","menuWidth","getMenuType","MenuType","FOR_ANNOTATION","setTimeout","element","focus","textAreaHeight","key","textarea","scrollHeight","scrollWidth","hideMenu","getAnnotationData","annotationData","parseInt","toHex","pageNumber","getSvgPath","previousX","previousY","Component","selector","template","AnnotationAppComponent","_annotationService","_modalService","_navigateService","_tabActivatorService","_hostingComponentsService","_addDynamicComponentService","uploadFilesService","pagePreloadService","passwordService","_windowService","title","files","browseFilesModal","CommonModals","BrowseFiles","formatDisabled","annotationTypes","annotationTypeFirst","annotationTypeSecond","annotationTypeThird","countPages","comments","Map","fileWasDropped","annotations","activeAnnotationId","commentOpenedId","commentAnnotation","set","addCommentObserve","removeAnnotation","componentRef","destroy","delete","uploadsChange","uploads","item","rewriteConfig","obj","selectFile","selectDir","checkPreload","preloadPageCountConfig","pages","preloadPages","passChange","pass","PasswordRequired","isDesktop","onResize","w","getComments","zoom","pageSelector","preloadPageCount","download","downloadOriginal","downloadAnnotated","defaultDocumentConfig","defaultDocument","browse","enableRightClick","textAnnotation","areaAnnotation","pointAnnotation","textStrikeoutAnnotation","polylineAnnotation","textFieldAnnotation","watermarkAnnotation","textReplacementAnnotation","arrowAnnotation","textRedactionAnnotation","textUnderlineAnnotation","distanceAnnotation","openModal","open","closeModal","close","modalId","FileCredentials","cleanAnnotations","importAnnotations","clearData","start","this_1","annotations_1","annotations_1_1","annotation","addAnnotationComponent","onRightClick","enableRightClickConfig","downloadFile","assign","values","OperationSuccess","isVisible","supported","supportedAnnotations","getAnnotationTypeConfig","activeTab","activeAnnotationTab","codesConfigFirst","checkConfig","codesConfigSecond","annotationList","annotationList_1","annotationList_1_1","annotationType","codesConfigThird","textAnnotationConfig","areaAnnotationConfig","pointAnnotationConfig","textStrikeoutAnnotationConfig","polylineAnnotationConfig","textFieldAnnotationConfig","watermarkAnnotationConfig","textReplacementAnnotationConfig","arrowAnnotationConfig","textRedactionAnnotationConfig","textUnderlineAnnotationConfig","distanceAnnotationConfig","fileDropped","createAnnotation","elementsFromPoint","startsWith","documentPage","getCurrentPosition","pageId","creatingAnnotationId","changeActiveTab","dynamicDirective","viewContainerRef","annotationComponent","addDynamicComponent","size","toString","pageModel","number","resizingCreatingAnnotation","offset","finishCreatingAnnotation","closeComments","ModalService","NavigateService","TopTabActivatorService","HostingDynamicComponentService","AddDynamicComponentService","UploadFilesService","PagePreloadService","PasswordService","WindowService","CommentPanelComponent","EventEmitter","closePanel","emit","newComment","currentComment","annotationId","clearComment","Input","Output","CommentComponent","getTime","hours","sec","CreateCommentComponent","removeComment","onAddComment","saveName","initializeApp","annotationConfigService","setupLoadingInterceptor","service","LoadingMaskInterceptorService","AnnotationModule","library","add","fas","far","forRoot","apiEndpoint","DEFAULT_API_ENDPOINT","ngModule","NgModule","declarations","exports","CommonComponentsModule","imports","CommonModule","HttpClientModule","FontAwesomeModule","ClickOutsideModule","providers","provide","HTTP_INTERCEPTORS","useClass","ErrorInterceptorService","multi","APP_INITIALIZER","useFactory","deps","LoadingMaskService","entryComponents"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export class AnnotationConfig {\n  rewrite: boolean;\n  pageSelector: boolean;\n  download: boolean;\n  upload: boolean;\n  print: boolean;\n  browse: boolean;\n  enableRightClick: boolean;\n\n  filesDirectory: string;\n  fontsDirectory: string;\n  defaultDocument: string;\n  preloadPageCount: 0;\n\n  textAnnotation: boolean;\n  areaAnnotation: boolean;\n  pointAnnotation: boolean;\n  textStrikeoutAnnotation: boolean;\n  polylineAnnotation: boolean;\n  textFieldAnnotation: boolean;\n  watermarkAnnotation: boolean;\n  textReplacementAnnotation: boolean;\n  arrowAnnotation: boolean;\n  textRedactionAnnotation: boolean;\n  textUnderlineAnnotation: boolean;\n  distanceAnnotation: boolean;\n  downloadOriginal: boolean;\n  downloadAnnotated: boolean;\n\n  zoom: boolean;\n  fitWidth: boolean;\n}\n","import {Injectable} from '@angular/core';\nimport {BehaviorSubject, Observable} from \"rxjs\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {Api, ConfigService} from \"@groupdocs.examples.angular/common-components\";\nimport {AnnotationConfig} from \"./annotation-config\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AnnotationConfigService {\n\n  private _annotationConfig: BehaviorSubject<AnnotationConfig> = new BehaviorSubject(new AnnotationConfig());\n  private _updatedConfig: Observable<AnnotationConfig> = this._annotationConfig.asObservable();\n\n  constructor(private _http: HttpClient, private _config: ConfigService) {\n  }\n\n  get updatedConfig() {\n    return this._updatedConfig;\n  }\n\n  load() {\n    return new Promise<void>((resolve, reject) => {\n      const configEndpoint = this._config.getConfigEndpoint(Api.ANNOTATION_APP);\n      this._http.get(configEndpoint, Api.httpOptionsJson).toPromise().then((response: AnnotationConfig) => {\n        const annotationConfig = <AnnotationConfig>response;\n        this._annotationConfig.next(annotationConfig);\n        resolve();\n      }).catch((response: any) => {\n        reject(`Could not load annotation config: ${JSON.stringify(response)}`);\n      });\n    });\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from \"@angular/common/http\";\nimport {Api, ConfigService, FileCredentials, FileUtil} from \"@groupdocs.examples.angular/common-components\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AnnotationService {\n\n  constructor(private _http: HttpClient, private _config: ConfigService) {\n  }\n\n  loadFiles(path: string) {\n    return this._http.post(this._config.getAnnotationApiEndpoint() + Api.LOAD_FILE_TREE, {'path': path}, Api.httpOptionsJson);\n  }\n\n  loadFile(credentials: FileCredentials) {\n    return this._http.post(this._config.getAnnotationApiEndpoint() + Api.LOAD_DOCUMENT_DESCRIPTION, credentials, Api.httpOptionsJson);\n  }\n\n  upload(file: File, url: string, rewrite: boolean) {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append('rewrite', String(rewrite));\n    if (url) {\n      formData.append(\"url\", url);\n    }\n\n    return this._http.post(this._config.getAnnotationApiEndpoint() + Api.UPLOAD_DOCUMENTS, formData);\n  }\n\n  loadPage(credentials: FileCredentials, page: number) {\n    return this._http.post(this._config.getAnnotationApiEndpoint() + Api.LOAD_DOCUMENT_PAGE, {\n      'guid': credentials.guid,\n      'password': credentials.password,\n      'page': page\n    }, Api.httpOptionsJson);\n  }\n\n  getDownloadUrl(credentials: FileCredentials) {\n    return this._config.getAnnotationApiEndpoint() + Api.DOWNLOAD_DOCUMENTS + '/?path=' + credentials.guid;\n  }\n\n  annotate(credentials: FileCredentials, annotationsData: any, print: boolean) {\n    const data = {\n      'guid': credentials.guid,\n      'password': credentials.password,\n      'annotationsData': annotationsData,\n      'documentType': FileUtil.find(credentials.guid, false).format,\n      'print': print\n    };\n    return this._http.post(this._config.getAnnotationApiEndpoint() + Api.ANNOTATE, data, Api.httpOptionsJson);\n  }\n}\n","import {PageModel} from \"@groupdocs.examples.angular/common-components\";\n\nexport class AnnotationType {\n  public static TEXT = {id: 'text', name: 'Text', icon: 'highlighter'};\n  public static AREA = {id: 'area', name: 'Area', icon: 'vector-square'};\n  public static POINT = {id: 'point', name: 'Point', icon: 'thumbtack'};\n  public static TEXT_STRIKEOUT = {id: 'textStrikeout', name: 'Text strikeout', icon: 'strikethrough',};\n  public static POLYLINE = {id: 'polyline', name: 'Polyline', icon: 'signature'};\n  public static TEXT_FIELD = {id: 'textField', name: 'Text field', icon: 'i-cursor'};\n  public static WATERMARK = {id: 'watermark', name: 'Watermark', icon: 'tint'};\n  public static TEXT_REPLACEMENT = {id: 'textReplacement', name: 'Text replacement', icon: 'edit'};\n  public static ARROW = {id: 'arrow', name: 'Arrow', icon: 'mouse-pointer'};\n  public static TEXT_REDACTION = {id: 'textRedaction', name: 'Text redaction', icon: 'brush'};\n  public static TEXT_UNDERLINE = {id: 'textUnderline', name: 'Text underline', icon: 'underline'};\n  public static DISTANCE = {id: 'distance', name: 'Distance', icon: 'ruler'};\n\n  public static getAnnotationType(id: string) {\n    switch (id) {\n      case AnnotationType.TEXT.id:\n        return AnnotationType.TEXT;\n      case AnnotationType.AREA.id:\n        return AnnotationType.AREA;\n      case AnnotationType.POINT.id:\n        return AnnotationType.POINT;\n      case AnnotationType.TEXT_STRIKEOUT.id:\n        return AnnotationType.TEXT_STRIKEOUT;\n      case AnnotationType.POLYLINE.id:\n        return AnnotationType.POLYLINE;\n      case AnnotationType.TEXT_FIELD.id:\n        return AnnotationType.TEXT_FIELD;\n      case AnnotationType.WATERMARK.id:\n        return AnnotationType.WATERMARK;\n      case AnnotationType.TEXT_REPLACEMENT.id:\n        return AnnotationType.TEXT_REPLACEMENT;\n      case AnnotationType.ARROW.id:\n        return AnnotationType.ARROW;\n      case AnnotationType.TEXT_REDACTION.id:\n        return AnnotationType.TEXT_REDACTION;\n      case AnnotationType.TEXT_UNDERLINE.id:\n        return AnnotationType.TEXT_UNDERLINE;\n      case AnnotationType.DISTANCE.id:\n        return AnnotationType.DISTANCE;\n    }\n  }\n}\n\nexport class FileAnnotationDescription {\n  guid: string;\n  pages: PageAnnotationModel[];\n  supportedAnnotations: string[];\n}\n\nexport class PageAnnotationModel extends PageModel {\n  annotations: AnnotationData[];\n}\n\nexport class Position {\n  left: number;\n  top: number;\n\n  constructor(left: number, top: number) {\n    this.left = left;\n    this.top = top;\n  }\n\n  static clone(position: Position) {\n    return new Position(position.left, position.top);\n  }\n}\n\nexport class Dimension {\n  width: number;\n  height: number;\n\n  constructor(width: number, height: number) {\n    this.width = width;\n    this.height = height;\n  }\n\n  isNone() {\n    return this.width === 0 && this.height === 0;\n  }\n}\n\nexport class AnnotationData {\n\n  constructor() {\n    this.text = \"\";\n    this.fontColor = 8421375;\n  }\n\n  id: number;\n  comments: Comment[];\n  text: string;\n  font: string;\n  fontSize: number;\n  fontColor: number;\n  height: number;\n  width: number;\n  left: number;\n  top: number;\n  pageNumber: number;\n  svgPath: string;\n  type: string;\n}\n\nexport class CommentAnnotation {\n  constructor(id: number) {\n    this.id = id;\n  }\n\n  id: number;\n}\n\nexport class Comment {\n\n  id: number;\n  text: string;\n  userName: string;\n  time: number;\n\n  constructor(id: number) {\n    this.id = id;\n    this.time = Date.now();\n    this.text = \"\";\n    this.userName = \"\";\n  }\n\n  static create(comment) {\n    const ret = new Comment(comment.id);\n    ret.text = comment.text;\n    ret.userName = comment.userName;\n    ret.time = comment.time;\n    return ret;\n  }\n}\n\nexport class RemoveAnnotation {\n  constructor(id: number) {\n    this.id = id;\n  }\n\n  id: number;\n}\n","import {Observable, Subject} from \"rxjs\";\n\nexport class ActiveAnnotationService {\n  private _observer: Subject<number> = new Subject();\n  private readonly _activeChange: Observable<number> = this._observer.asObservable();\n\n  constructor() {\n  }\n\n  get activeChange(): Observable<number> {\n    return this._activeChange;\n  }\n\n  changeActive(annId: number) {\n    this._observer.next(annId);\n  }\n}\n\n","import {Observable, Subject} from \"rxjs\";\nimport {RemoveAnnotation} from \"./annotation-models\";\n\nexport class RemoveAnnotationService {\n  private _observer: Subject<RemoveAnnotation> = new Subject();\n  private readonly _removeAnnotation: Observable<RemoveAnnotation> = this._observer.asObservable();\n\n  constructor() {\n  }\n\n  get removeAnnotation(): Observable<RemoveAnnotation> {\n    return this._removeAnnotation;\n  }\n\n  remove(id: RemoveAnnotation): void {\n    this._observer.next(id);\n  }\n}\n","import {Observable, Subject} from \"rxjs\";\nimport {CommentAnnotation, Comment} from \"./annotation-models\";\n\nexport class CommentAnnotationService {\n  private _observer: Subject<CommentAnnotation> = new Subject();\n  private readonly _commentAnnotation: Observable<CommentAnnotation> = this._observer.asObservable();\n  private _observerAddComment: Subject<Comment> = new Subject();\n  private readonly _addCommentObserve: Observable<Comment> = this._observerAddComment.asObservable();\n\n  constructor() {\n  }\n\n  get commentAnnotation(): Observable<CommentAnnotation> {\n    return this._commentAnnotation;\n  }\n\n  comment(id: CommentAnnotation): void {\n    this._observer.next(id);\n  }\n\n  get addCommentObserve(): Observable<Comment> {\n    return this._addCommentObserve;\n  }\n\n  addComment(comment: Comment) {\n    this._observerAddComment.next(comment);\n  }\n\n}\n","import {AfterViewInit, Component, OnInit} from '@angular/core';\nimport {\n  AnnotationData,\n  AnnotationType,\n  CommentAnnotation,\n  Dimension,\n  Position,\n  RemoveAnnotation\n} from \"../annotation-models\";\nimport {ActiveAnnotationService} from \"../active-annotation.service\";\nimport {Formatting, Utils, MenuType} from \"@groupdocs.examples.angular/common-components\";\nimport {RemoveAnnotationService} from \"../remove-annotation.service\";\nimport {CommentAnnotationService} from \"../comment-annotation.service\";\nimport * as jquery from 'jquery';\n\nconst $ = jquery;\n\n@Component({\n  selector: 'gd-annotation',\n  templateUrl: './annotation.component.html',\n  styleUrls: ['./annotation.component.less']\n})\nexport class AnnotationComponent implements OnInit, AfterViewInit {\n\n  id: number;\n  position: Position;\n  leftTop: Position;\n  type: string;\n  pageWidth: number;\n  pageHeight: number;\n  active = true;\n  dimension = new Dimension(0, 0);\n  pageNumber: number;\n  textValue = \"\";\n  pathValue: string;\n  distanceValue = '0px';\n  pointsValue = \"\";\n  svgPath = \"\";\n  formatting = Formatting.default();\n\n  private oldPosition: { x: number; y: number };\n  private points = [];\n  private endPosition: Position;\n\n  constructor(private _activeAnnotationService: ActiveAnnotationService,\n              private _removeAnnotationService: RemoveAnnotationService,\n              private _commentAnnotationService: CommentAnnotationService) {\n    this._activeAnnotationService.activeChange.subscribe((id: number) => {\n      this.active = this.id === id;\n      if (this.active) {\n        this.setTextFocus();\n      }\n    });\n  }\n\n  static isOnPage(position) {\n    const currentPage = document.elementFromPoint(position.x, position.y);\n    return currentPage && $(currentPage).parent().parent() &&\n      ($(currentPage).parent().parent().parent().hasClass(\"page\") ||\n        $(currentPage).parent().parent().parent().parent().parent().hasClass(\"page\"));\n  }\n\n  ngOnInit() {\n    this.leftTop = Position.clone(this.position);\n    if (this.isPolyline()) {\n      if (this.svgPath) {\n        const parsedPoints = this.svgPath.replace(\"M\", \"\").split('L');\n        let x = parseFloat(parsedPoints[0].split(\",\")[0]);\n        let y = parseFloat(parsedPoints[0].split(\",\")[1]);\n        const comp = this;\n        parsedPoints.forEach(function (point, index) {\n          if (index !== 0) {\n            if (point !== \"\") {\n              comp.addPoint(new Position(x, y));\n              x = (x + parseFloat(point.split(\",\")[0]));\n              y = (y + parseFloat(point.split(\",\")[1]));\n            }\n          }\n        });\n      } else {\n        this.addPoint(this.position);\n      }\n    } else if (this.isPath()) {\n      if (this.svgPath || (this.type === AnnotationType.ARROW.id && !this.dimension.isNone())) {\n        const end = new Position(this.position.left + this.dimension.width, this.position.top + this.dimension.height);\n        this.setEndPosition(end);\n        if (this.dimension.height < 0) {\n          this.leftTop.top += this.dimension.height;\n          this.dimension.height = this.dimension.height * (-1);\n        }\n        if (this.dimension.width < 0) {\n          this.leftTop.left += this.dimension.width;\n          this.dimension.width = this.dimension.width * (-1);\n        }\n      } else {\n        this.setEndPosition(this.position);\n      }\n      this.distanceValue = this.getDistance() + \"px\";\n    } else {\n      this.setEndPosition(this.position);\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this.setTextFocus();\n  }\n\n  activation() {\n    this._activeAnnotationService.changeActive(this.id);\n  }\n\n  width($event) {\n    this.dimension.width += $event;\n    this.correctPosition();\n  }\n\n  height($event) {\n    this.dimension.height += $event;\n    this.correctPosition();\n  }\n\n  left($event) {\n    this.position.left += $event;\n    this.correctPosition();\n  }\n\n  top($event) {\n    this.position.top += $event;\n    this.correctPosition();\n  }\n\n  private correctPosition() {\n    if (this.position.left < 0) {\n      this.position.left = 0;\n    }\n    if (this.position.top < 0) {\n      this.position.top = 0;\n    }\n    if (this.position.top + this.dimension.height > this.pageHeight) {\n      this.position.top = this.pageHeight - this.dimension.height;\n    }\n    if (this.position.left + this.dimension.width > this.pageWidth) {\n      this.position.left = this.pageWidth - this.dimension.width;\n    }\n  }\n\n  dragOver($event: DragEvent) {\n    $event.preventDefault();\n    $event.stopPropagation();\n  }\n\n  dragStart($event: DragEvent) {\n    $event.preventDefault();\n    this.oldPosition = Utils.getMousePosition($event);\n    if ($event.dataTransfer) {\n      $event.dataTransfer.setData('text', 'foo');\n    }\n  }\n\n  dragging($event) {\n    $event.preventDefault();\n    const position = Utils.getMousePosition($event);\n    if (position.x && position.y && AnnotationComponent.isOnPage(position)) {\n      const left = position.x - this.oldPosition.x;\n      const top = position.y - this.oldPosition.y;\n      if (this.isPolyline()) {\n        if (!this.checkDragging(left, top)) {\n          return;\n        }\n        this.pointsValue = \"\";\n        for (const point of this.points) {\n          point.left = point.left + left;\n          point.top = point.top + top;\n          this.pointsValue += point.left + \",\" + point.top + \" \";\n        }\n      } else if (this.isPath()) {\n        if (!this.checkDragging(left, top)) {\n          return;\n        }\n        this.position.left += left;\n        this.position.top += top;\n        this.endPosition.left += left;\n        this.endPosition.top += top;\n        this.pathValue = \"M\" + this.position.left + \",\" + this.position.top + \" L\" + this.endPosition.left + \",\" + this.endPosition.top;\n        this.distanceValue = this.getDistance() + \"px\";\n      } else {\n        this.position.left += left;\n        this.position.top += top;\n        this.correctPosition();\n      }\n      this.leftTop.left += left;\n      this.leftTop.top += top;\n      this.oldPosition = position;\n    }\n  }\n\n  getAnnotationClass() {\n    switch (this.type) {\n      case AnnotationType.TEXT.id:\n        return \"gd-annotation-wrapper-border gd-text-annotation\";\n      case AnnotationType.TEXT_STRIKEOUT.id:\n        return \"gd-annotation-wrapper-border gd-text-annotation gd-text-strikeout-annotation\";\n      case AnnotationType.TEXT_UNDERLINE.id:\n        return \"gd-annotation-wrapper-border gd-text-annotation gd-text-underline-annotation\";\n      case AnnotationType.TEXT_REDACTION.id:\n        return \"gd-annotation-wrapper-border gd-text-redaction-annotation\";\n      case AnnotationType.TEXT_REPLACEMENT.id:\n        return \"gd-annotation-wrapper-border gd-text-replacement-annotation\";\n      case AnnotationType.POINT.id:\n        return \"\";\n      default:\n        return \"gd-annotation-wrapper-border\";\n    }\n  }\n\n  isStrikeoutOrUnderline() {\n    return this.type === AnnotationType.TEXT_STRIKEOUT.id || this.type === AnnotationType.TEXT_UNDERLINE.id;\n  }\n\n  isTextReplacement() {\n    return this.type === AnnotationType.TEXT_REPLACEMENT.id;\n  }\n\n  saveText(value: string) {\n    this.textValue = value;\n  }\n\n  draw(position: Position) {\n    if (this.isPolyline()) {\n      this.addPoint(position);\n    } else if (this.isPath()) {\n      this.setEndPosition(position);\n      this.distanceValue = this.getDistance() + \"px\";\n    }\n    this.calcPositionAndDimension();\n  }\n\n  setStyles() {\n    return {\n      'stroke': '#579AF0',\n      'stroke-width': 2,\n      'fill-opacity': 0,\n      'id': (this.isPolyline() ? 'gd-polyline-annotation-' : (this.isDistance() ? 'gd-distance-annotation-' : 'gd-arrow-annotation-')) + this.id,\n      'class': 'annotation-svg',\n    };\n  }\n\n  isPolyline() {\n    return this.type === AnnotationType.POLYLINE.id;\n  }\n\n  private calcPositionAndDimension() {\n    const leftTop = new Position(Number.MAX_VALUE, Number.MAX_VALUE);\n    const rightBottom = new Position(Number.MIN_VALUE, Number.MIN_VALUE);\n    if (this.isPolyline()) {\n      for (const point of this.points) {\n        leftTop.left = Math.min(point.left, leftTop.left);\n        leftTop.top = Math.min(point.top, leftTop.top);\n        rightBottom.left = Math.max(point.left, rightBottom.left);\n        rightBottom.top = Math.max(point.top, rightBottom.top);\n      }\n    } else {\n      leftTop.left = Math.min(this.position.left, this.endPosition.left);\n      leftTop.top = Math.min(this.position.top, this.endPosition.top);\n      rightBottom.left = Math.max(this.position.left, this.endPosition.left);\n      rightBottom.top = Math.max(this.position.top, this.endPosition.top);\n    }\n    this.dimension.width = rightBottom.left - leftTop.left;\n    this.dimension.height = rightBottom.top - leftTop.top;\n    this.leftTop = leftTop;\n  }\n\n  calcDimensions(currentPosition: Position) {\n    this.dimension.width = currentPosition.left - this.position.left;\n    this.dimension.height = currentPosition.top - this.position.top;\n  }\n\n  getHeight() {\n    return this.dimension.height === undefined ? undefined : Math.abs(this.dimension.height);\n  }\n\n  getWidth() {\n    return this.dimension.width === undefined ? undefined : Math.abs(this.dimension.width);\n  }\n\n  private checkDragging(left: number, top: number) {\n    return !(this.leftTop.left + left < 0 || this.leftTop.top + top < 0 ||\n      this.leftTop.top + top + this.dimension.height > this.pageHeight ||\n      this.leftTop.left + left + this.dimension.width > this.pageWidth);\n  }\n\n  isPoint() {\n    return this.type === AnnotationType.POINT.id;\n  }\n\n  isSVG() {\n    return this.type === AnnotationType.POLYLINE.id ||\n      this.type === AnnotationType.DISTANCE.id ||\n      this.type === AnnotationType.ARROW.id;\n  }\n\n  isDistance() {\n    return this.type === AnnotationType.DISTANCE.id;\n  }\n\n  distanceTextOptions() {\n    return {'font-size': \"12px\"}\n  }\n\n  isPath() {\n    return this.type === AnnotationType.DISTANCE.id ||\n      this.type === AnnotationType.ARROW.id;\n  }\n\n  private setEndPosition(position: Position) {\n    this.endPosition = Position.clone(position);\n    this.pathValue = \"M\" + this.position.left + \",\" + this.position.top + \" L\" + this.endPosition.left + \",\" + this.endPosition.top;\n  }\n\n  private addPoint(position: Position) {\n    this.points.push(position);\n    this.pointsValue += position.left + \",\" + position.top + \" \";\n  }\n\n  private getDistance() {\n    const xs = this.position.left - this.endPosition.left;\n    const ys = this.position.top - this.endPosition.top;\n    return Math.round(Math.sqrt(xs * xs + ys * ys));\n  }\n\n  bottom() {\n    return 'url(' + window.location + '#end)';\n  }\n\n  head() {\n    return this.isDistance() ? 'url(' + window.location + '#start)' : \"\";\n  }\n\n  getTextX() {\n    return this.getDistance() / 2;\n  }\n\n  isText() {\n    return this.type === AnnotationType.TEXT_FIELD.id || this.type === AnnotationType.WATERMARK.id;\n  }\n\n  getFormatting() {\n    const f = this.formatting;\n    const formatting = Formatting.default();\n    if (f) {\n      formatting.fontSize = f.fontSize;\n      formatting.font = f.font;\n      formatting.color = f.color;\n    }\n    return formatting;\n  }\n\n  saveFormatting($event: Formatting) {\n    this.formatting.fontSize = $event.fontSize;\n    this.formatting.font = $event.font;\n    this.formatting.color = $event.color;\n  }\n\n  remove() {\n    this._removeAnnotationService.remove(new RemoveAnnotation(this.id));\n  }\n\n  getMenuShift() {\n    const menuWidth = this.isText() ? 265 : 148;\n    return this.dimension.width > menuWidth ? 0 : (this.dimension.width - menuWidth) * 0.5;\n  }\n\n  getMenuType() {\n    return MenuType.FOR_ANNOTATION;\n  }\n\n  addComment() {\n    this._commentAnnotationService.comment(new CommentAnnotation(this.id));\n  }\n\n  private setTextFocus() {\n    if (this.isText() || this.isTextReplacement()) {\n      setTimeout(() => {\n        const element = $(\"#text\");\n        if (element) {\n          element.focus();\n        }\n      }, 100);\n    }\n  }\n\n  textAreaHeight(key: any, textarea: any) {\n    this.dimension.height = \"Enter\" === key ? textarea.scrollHeight + this.formatting.fontSize : textarea.scrollHeight;\n    this.dimension.width = textarea.scrollWidth;\n  }\n\n  hideMenu($event: Event) {\n    this._activeAnnotationService.changeActive(null);\n  }\n\n  getAnnotationData(): AnnotationData {\n    const annotationData = new AnnotationData();\n    annotationData.id = this.id;\n    annotationData.text = this.textValue;\n    annotationData.fontColor = parseInt(Utils.toHex(this.formatting.color).replace(\"#\", \"\"), 16);\n    annotationData.fontSize = this.formatting.fontSize;\n    annotationData.font = this.formatting.font;\n    annotationData.left = this.leftTop.left;\n    annotationData.top = this.leftTop.top;\n    annotationData.height = this.dimension.height;\n    annotationData.width = this.dimension.width;\n    annotationData.pageNumber = this.pageNumber;\n    annotationData.type = this.type;\n    annotationData.svgPath = this.getSvgPath();\n    return annotationData;\n  }\n\n  private getSvgPath() {\n    let svgPath = \"M\";\n    if (this.type === AnnotationType.POLYLINE.id) {\n      let index = 0;\n      let previousX = 0, previousY = 0;\n      for (const point of this.points) {\n        if (index === 0) {\n          svgPath += point.left + \",\" + point.top + \"l\";\n          index = 1;\n        } else {\n          previousX = point.left - previousX;\n          previousY = point.top - previousY;\n          svgPath += previousX + \",\" + previousY + \"l\";\n        }\n        previousX = point.left;\n        previousY = point.top;\n      }\n    } else if (this.type === AnnotationType.DISTANCE.id || this.type === AnnotationType.ARROW.id) {\n      svgPath += this.position.left + \",\" + this.position.top + \" \";\n      svgPath += this.endPosition.left + \",\" + this.endPosition.top + \" \";\n    } else {\n      svgPath = \"\";\n    }\n    return svgPath;\n  }\n}\n","import {Component, ComponentRef, OnInit} from '@angular/core';\nimport {AnnotationConfig} from \"./annotation-config\";\nimport {AnnotationService} from \"./annotation.service\";\nimport {\n  AddDynamicComponentService,\n  CommonModals,\n  FileCredentials,\n  FileModel, Formatting,\n  HostingDynamicComponentService,\n  ModalService,\n  NavigateService, PagePreloadService, PasswordService,\n  TopTabActivatorService, UploadFilesService,\n  Utils,\n  WindowService\n} from \"@groupdocs.examples.angular/common-components\";\nimport {\n  AnnotationType,\n  CommentAnnotation,\n  Position,\n  RemoveAnnotation,\n  Comment,\n  FileAnnotationDescription, PageAnnotationModel, AnnotationData, Dimension\n} from \"./annotation-models\";\nimport {AnnotationComponent} from \"./annotation/annotation.component\";\nimport {ActiveAnnotationService} from \"./active-annotation.service\";\nimport * as jquery from 'jquery';\nimport {RemoveAnnotationService} from \"./remove-annotation.service\";\nimport {CommentAnnotationService} from \"./comment-annotation.service\";\n\nconst $ = jquery;\n\n@Component({\n  selector: 'gd-annotation-app',\n  templateUrl: './annotation-app.component.html',\n  styleUrls: ['./annotation-app.component.less']\n})\nexport class AnnotationAppComponent implements OnInit {\n  title = 'annotation';\n  files: FileModel[] = [];\n  file: FileAnnotationDescription;\n  isLoading: boolean;\n  annotationConfig: AnnotationConfig;\n  browseFilesModal = CommonModals.BrowseFiles;\n  formatDisabled = !this.file;\n  credentials: FileCredentials;\n  annotationTypes = [\n    AnnotationType.TEXT,\n    AnnotationType.TEXT_STRIKEOUT,\n    AnnotationType.TEXT_UNDERLINE,\n    AnnotationType.TEXT_REPLACEMENT,\n    AnnotationType.TEXT_REDACTION,\n    AnnotationType.POLYLINE,\n    AnnotationType.ARROW,\n    AnnotationType.DISTANCE,\n    AnnotationType.AREA,\n    AnnotationType.TEXT_FIELD,\n    AnnotationType.WATERMARK,\n    AnnotationType.POINT,\n  ];\n  isDesktop: boolean;\n  annotationTypeFirst = [\n    AnnotationType.TEXT,\n    AnnotationType.TEXT_UNDERLINE,\n    AnnotationType.TEXT_REDACTION,\n    AnnotationType.TEXT_REPLACEMENT,\n    AnnotationType.TEXT_STRIKEOUT,\n  ];\n  annotationTypeSecond = [\n    AnnotationType.POLYLINE,\n    AnnotationType.ARROW,\n    AnnotationType.DISTANCE,\n    AnnotationType.AREA,\n    AnnotationType.POINT\n  ];\n  annotationTypeThird = [\n    AnnotationType.TEXT_FIELD,\n    AnnotationType.WATERMARK,\n  ];\n  countPages = 0;\n  commentOpenedId: number;\n  comments = new Map<number, Comment[]>();\n\n  private activeAnnotationTab: string;\n  private fileWasDropped = false;\n  private annotations = new Map<number, ComponentRef<any>>();\n  private creatingAnnotationId: number;\n  private activeAnnotationId: number;\n\n  constructor(private _annotationService: AnnotationService,\n              private _modalService: ModalService,\n              private _navigateService: NavigateService,\n              private _tabActivatorService: TopTabActivatorService,\n              private _hostingComponentsService: HostingDynamicComponentService,\n              private _addDynamicComponentService: AddDynamicComponentService,\n              private _activeAnnotationService: ActiveAnnotationService,\n              private _removeAnnotationService: RemoveAnnotationService,\n              private _commentAnnotationService: CommentAnnotationService,\n              uploadFilesService: UploadFilesService,\n              pagePreloadService: PagePreloadService,\n              passwordService: PasswordService,\n              private _windowService: WindowService) {\n\n    this._activeAnnotationService.activeChange.subscribe((id: number) => {\n      if (this.activeAnnotationId !== id) {\n        this.commentOpenedId = null;\n        this.activeAnnotationId = id;\n      }\n    });\n\n    this._commentAnnotationService.commentAnnotation.subscribe((commentAnnotation: CommentAnnotation) => {\n      this.commentOpenedId = commentAnnotation.id;\n      if (!this.comments.get(this.commentOpenedId)) {\n        this.comments.set(this.commentOpenedId, []);\n      }\n    });\n\n    this._commentAnnotationService.addCommentObserve.subscribe((comment: Comment) => {\n      this.comments.get(this.commentOpenedId).push(comment);\n    });\n\n    this._removeAnnotationService.removeAnnotation.subscribe((removeAnnotation: RemoveAnnotation) => {\n      const componentRef = this.annotations.get(removeAnnotation.id);\n      if (componentRef) {\n        componentRef.destroy();\n      }\n      this.annotations.delete(removeAnnotation.id);\n    });\n\n    uploadFilesService.uploadsChange.subscribe((uploads) => {\n      if (uploads) {\n        let i: number;\n        for (i = 0; i < uploads.length; i++) {\n          this._annotationService.upload(uploads.item(i), '', this.rewriteConfig).subscribe((obj: FileCredentials) => {\n            this.fileWasDropped ? this.selectFile(obj.guid, '', '') : this.selectDir('');\n          });\n        }\n      }\n    });\n\n    pagePreloadService.checkPreload.subscribe((page: number) => {\n      if (this.preloadPageCountConfig !== 0) {\n        for (let i = page; i < page + 2; i++) {\n          if (i > 0 && i <= this.countPages && !this.file.pages[i - 1].data) {\n            this.preloadPages(i, i);\n          }\n        }\n      }\n    });\n\n    passwordService.passChange.subscribe((pass: string) => {\n      this.selectFile(this.credentials.guid, pass, CommonModals.PasswordRequired);\n    });\n\n    this.isDesktop = _windowService.isDesktop();\n    _windowService.onResize.subscribe((w) => {\n      this.isDesktop = _windowService.isDesktop();\n    });\n  }\n\n  getComments() {\n    return this.comments.get(this.commentOpenedId);\n  }\n\n  get rewriteConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.rewrite : true;\n  }\n\n  get zoomConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.zoom : false;\n  }\n\n  get pageSelectorConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.pageSelector : true;\n  }\n\n  get preloadPageCountConfig(): number {\n    return this.annotationConfig ? this.annotationConfig.preloadPageCount : 0;\n  }\n\n  get downloadConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.download : true;\n  }\n\n  get downloadOriginalConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.downloadOriginal : true;\n  }\n\n  get downloadAnnotatedConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.downloadAnnotated : true;\n  }\n\n  get uploadConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.upload : true;\n  }\n\n  private defaultDocumentConfig() {\n    return this.annotationConfig ? this.annotationConfig.defaultDocument : \"\";\n  }\n\n  get printConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.print : true;\n  }\n\n  get browseConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.browse : true;\n  }\n\n  get htmlModeConfig(): boolean {\n    return false;\n  }\n\n  get enableRightClickConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.enableRightClick : true;\n  }\n\n  get textAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.textAnnotation : true;\n  }\n\n  get areaAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.areaAnnotation : true;\n  }\n\n  get pointAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.pointAnnotation : true;\n  }\n\n  get textStrikeoutAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.textStrikeoutAnnotation : true;\n  }\n\n  get polylineAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.polylineAnnotation : true;\n  }\n\n  get textFieldAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.textFieldAnnotation : true;\n  }\n\n  get watermarkAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.watermarkAnnotation : true;\n  }\n\n  get textReplacementAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.textReplacementAnnotation : true;\n  }\n\n  get arrowAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.arrowAnnotation : true;\n  }\n\n  get textRedactionAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.textRedactionAnnotation : true;\n  }\n\n  get textUnderlineAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.textUnderlineAnnotation : true;\n  }\n\n  get distanceAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.distanceAnnotation : true;\n  }\n\n  ngOnInit() {\n  }\n\n  openModal(id: string) {\n    this._modalService.open(id);\n  }\n\n  closeModal(id: string) {\n    this._modalService.close(id);\n  }\n\n  selectDir($event: string) {\n    this._annotationService.loadFiles($event).subscribe((files: FileModel[]) => this.files = files || []);\n  }\n\n  selectFile($event: string, password: string, modalId: string) {\n    this.credentials = new FileCredentials($event, password);\n    this.file = null;\n    this._annotationService.loadFile(this.credentials).subscribe((file: FileAnnotationDescription) => {\n        this.cleanAnnotations();\n        this.file = file;\n        this.formatDisabled = !this.file;\n        if (file) {\n          const preloadPageCount = this.preloadPageCountConfig;\n          const countPages = file.pages ? file.pages.length : 0;\n          if (preloadPageCount > 0) {\n            this.preloadPages(1, preloadPageCount > countPages ? countPages : preloadPageCount);\n          } else {\n            setTimeout(() => {\n              for (const page of this.file.pages) {\n                this.importAnnotations(page.annotations ? page.annotations : []);\n              }\n            }, 100);\n          }\n          this._navigateService.countPages = countPages;\n          this._navigateService.currentPage = 1;\n          this.countPages = countPages;\n        }\n      }\n    );\n    if (modalId) {\n      this._modalService.close(modalId);\n    }\n    this.clearData();\n  }\n\n  preloadPages(start: number, end: number) {\n    for (let i = start; i <= end; i++) {\n      this._annotationService.loadPage(this.credentials, i).subscribe((page: PageAnnotationModel) => {\n        this.file.pages[i - 1] = page;\n        this.importAnnotations(page.annotations ? page.annotations : []);\n      });\n    }\n  }\n\n  private importAnnotations(annotations: AnnotationData[]) {\n    for (const annotation of annotations) {\n      const position = new Position(annotation.left, annotation.top);\n      const id = this.addAnnotationComponent(annotation.pageNumber, position, annotation);\n      this.comments.set(id, annotation.comments);\n    }\n  }\n\n  upload($event: string) {\n    this._annotationService.upload(null, $event, this.rewriteConfig).subscribe(() => {\n      this.selectDir('');\n    });\n  }\n\n  onRightClick($event: MouseEvent) {\n    return this.enableRightClickConfig;\n  }\n\n  downloadFile() {\n    if (this.formatDisabled)\n      return;\n    window.location.assign(this._annotationService.getDownloadUrl(this.credentials));\n  }\n\n  annotate() {\n    const annotationsData = [];\n    for (const annotation of this.annotations.values()) {\n      const annotationData = (<AnnotationComponent>annotation.instance).getAnnotationData();\n      annotationData.comments = this.comments.get(annotationData.id);\n      annotationsData.push(annotationData);\n    }\n    this._annotationService.annotate(this.credentials, annotationsData, false).subscribe((ret: any) => {\n      this._modalService.open(CommonModals.OperationSuccess);\n      this.selectFile(ret.guid, null, CommonModals.OperationSuccess);\n    });\n  }\n\n  isVisible(id: string) {\n    const supported = !this.file || (this.file && this.file.supportedAnnotations.find(function (value: string) {\n      return id === value;\n    }));\n    return this.getAnnotationTypeConfig(id) && supported;\n  }\n\n  activeTab($event) {\n    this.activeAnnotationTab = $event;\n  }\n\n  codesConfigFirst() {\n    return this.checkConfig(this.annotationTypeFirst);\n  }\n\n  codesConfigSecond() {\n    return this.checkConfig(this.annotationTypeSecond);\n  }\n\n  private checkConfig(annotationList) {\n    for (const annotationType of annotationList) {\n      if (this.getAnnotationTypeConfig(annotationType.id)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  codesConfigThird() {\n    return this.getAnnotationTypeConfig(AnnotationType.TEXT_FIELD.id) && this.getAnnotationTypeConfig(AnnotationType.WATERMARK.id);\n  }\n\n  private getAnnotationTypeConfig(id: string) {\n    switch (id) {\n      case AnnotationType.TEXT.id:\n        return this.textAnnotationConfig;\n      case AnnotationType.AREA.id:\n        return this.areaAnnotationConfig;\n      case AnnotationType.POINT.id:\n        return this.pointAnnotationConfig;\n      case AnnotationType.TEXT_STRIKEOUT.id:\n        return this.textStrikeoutAnnotationConfig;\n      case AnnotationType.POLYLINE.id:\n        return this.polylineAnnotationConfig;\n      case AnnotationType.TEXT_FIELD.id:\n        return this.textFieldAnnotationConfig;\n      case AnnotationType.WATERMARK.id:\n        return this.watermarkAnnotationConfig;\n      case AnnotationType.TEXT_REPLACEMENT.id:\n        return this.textReplacementAnnotationConfig;\n      case AnnotationType.ARROW.id:\n        return this.arrowAnnotationConfig;\n      case AnnotationType.TEXT_REDACTION.id:\n        return this.textRedactionAnnotationConfig;\n      case AnnotationType.TEXT_UNDERLINE.id:\n        return this.textUnderlineAnnotationConfig;\n      case AnnotationType.DISTANCE.id:\n        return this.distanceAnnotationConfig;\n    }\n  }\n\n  fileDropped($event) {\n    this.fileWasDropped = $event;\n  }\n\n  private cleanAnnotations() {\n    for (const componentRef of this.annotations.values()) {\n      componentRef.destroy();\n    }\n    this.annotations = new Map<number, ComponentRef<any>>();\n    this.comments = new Map<number, Comment[]>();\n  }\n\n  private clearData() {\n    if (!this.file || !this.file.pages) {\n      return;\n    }\n    for (const page of this.file.pages) {\n      page.data = null;\n    }\n  }\n\n  createAnnotation($event: MouseEvent) {\n    $event.preventDefault();\n    $event.stopPropagation();\n\n    if (this.activeAnnotationTab) {\n      const position = Utils.getMousePosition($event);\n\n      const elements = document.elementsFromPoint(position.x, position.y);\n      const currentPage = elements.find(x => x.id && x.id.startsWith(\"page-\"));\n      if (currentPage) {\n        const documentPage = $(currentPage).parent().parent()[0];\n        const currentPosition = this.getCurrentPosition(position, $(documentPage));\n        const pageId = currentPage.id;\n        let pageNumber = 1;\n        if (pageId) {\n          const split = pageId.split('-');\n          pageNumber = split.length === 2 ? parseInt(split[1], 10) : pageNumber;\n        }\n        const id = this.addAnnotationComponent(pageNumber, currentPosition, null);\n        this._activeAnnotationService.changeActive(id);\n        this.creatingAnnotationId = id;\n        this._tabActivatorService.changeActiveTab(null);\n      }\n    }\n  }\n\n  private addAnnotationComponent(pageNumber: number, currentPosition: Position, data: AnnotationData) {\n    const dynamicDirective = this._hostingComponentsService.find(pageNumber);\n    if (dynamicDirective) {\n      const viewContainerRef = dynamicDirective.viewContainerRef;\n      const annotationComponent = this._addDynamicComponentService.addDynamicComponent(viewContainerRef, AnnotationComponent);\n      const id = this.annotations.size + 1;\n      (<AnnotationComponent>annotationComponent.instance).id = id;\n      (<AnnotationComponent>annotationComponent.instance).position = currentPosition;\n      (<AnnotationComponent>annotationComponent.instance).pageNumber = pageNumber;\n      if (data) {\n        const dimension = new Dimension(data.width, data.height);\n        const type = AnnotationType.getAnnotationType(data.type);\n        const formatting = Formatting.default();\n        formatting.fontSize = data.fontSize;\n        if (data.fontColor) {\n          formatting.color = \"#\" + data.fontColor.toString(16);\n        }\n        formatting.font = data.font;\n        (<AnnotationComponent>annotationComponent.instance).type = type ? type.id : data.type;\n        (<AnnotationComponent>annotationComponent.instance).dimension = dimension;\n        (<AnnotationComponent>annotationComponent.instance).svgPath = data.svgPath;\n        (<AnnotationComponent>annotationComponent.instance).textValue = data.text;\n        if (formatting) {\n          (<AnnotationComponent>annotationComponent.instance).saveFormatting(formatting);\n        }\n      } else {\n        (<AnnotationComponent>annotationComponent.instance).type = this.activeAnnotationTab;\n      }\n      const pageModel = this.file.pages.find(function (p) {\n        return p.number === pageNumber;\n      });\n      (<AnnotationComponent>annotationComponent.instance).pageWidth = pageModel.width;\n      (<AnnotationComponent>annotationComponent.instance).pageHeight = pageModel.height;\n      this.annotations.set(id, annotationComponent);\n      return id;\n    }\n    return null;\n  }\n\n  resizingCreatingAnnotation($event: MouseEvent) {\n    $event.preventDefault();\n    $event.stopPropagation();\n\n    if (this.creatingAnnotationId) {\n      const position = Utils.getMousePosition($event);\n      const annotationComponent = this.annotations.get(this.creatingAnnotationId);\n      const type = (<AnnotationComponent>annotationComponent.instance).type;\n      const pageNumber = (<AnnotationComponent>annotationComponent.instance).pageNumber;\n      const currentPosition = this.getCurrentPosition(position, $(\"#page-\" + pageNumber));\n      if (type === AnnotationType.POLYLINE.id || type === AnnotationType.DISTANCE.id || type === AnnotationType.ARROW.id) {\n        (<AnnotationComponent>annotationComponent.instance).draw(currentPosition);\n      } else {\n        (<AnnotationComponent>annotationComponent.instance).calcDimensions(currentPosition);\n      }\n    }\n  }\n\n  private getCurrentPosition(position, page) {\n    const left = position.x - page.offset().left;\n    const top = position.y - page.offset().top;\n    return new Position(left, top);\n  }\n\n  finishCreatingAnnotation($event: MouseEvent) {\n    this.creatingAnnotationId = null;\n  }\n\n  closeComments() {\n    this.commentOpenedId = null;\n  }\n}\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {CommentAnnotationService} from \"../comment-annotation.service\";\nimport {Comment} from '../annotation-models'\n\n@Component({\n  selector: 'gd-comment-panel',\n  templateUrl: './comment-panel.component.html',\n  styleUrls: ['./comment-panel.component.less']\n})\nexport class CommentPanelComponent implements OnInit {\n  @Input() comments: [];\n  @Input() annotationId: number;\n\n  @Output() closeComments = new EventEmitter<boolean>();\n\n  currentComment: Comment;\n\n  constructor(private _commentAnnotationService: CommentAnnotationService) {\n  }\n\n  ngOnInit() {\n  }\n\n  closePanel() {\n    this.closeComments.emit(true);\n  }\n\n  newComment() {\n    this.currentComment = new Comment(this.annotationId);\n  }\n\n  clearComment() {\n    this.currentComment = null;\n  }\n\n  addComment() {\n    this._commentAnnotationService.addComment(Comment.create(this.currentComment));\n    this.currentComment = null;\n  }\n}\n","import {Component, Input, OnInit} from '@angular/core';\nimport {Comment} from '../annotation-models'\n\n@Component({\n  selector: 'gd-comment',\n  templateUrl: './comment.component.html',\n  styleUrls: ['./comment.component.less']\n})\nexport class CommentComponent implements OnInit {\n\n  @Input() comment: Comment;\n\n  constructor() {\n  }\n\n  ngOnInit() {\n  }\n\n  getTime() {\n    const time = Date.now() - this.comment.time;\n    const hours = Math.round(time / (60 * 60 * 1000));\n    if (hours > 1) {\n      return 'about ' + hours + ' hours ago';\n    }\n    const min = Math.round(time / (60 * 1000));\n    if (min > 1) {\n      return 'about ' + min + ' minutes ago';\n    }\n    const sec = Math.round(time / 1000);\n    if (sec > 1) {\n      return 'about ' + sec + ' seconds ago';\n    }\n    return this.comment.time;\n  }\n}\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {Comment} from '../annotation-models'\nimport * as jquery from 'jquery';\n\nconst $ = jquery;\n\n@Component({\n  selector: 'gd-create-comment',\n  templateUrl: './create-comment.component.html',\n  styleUrls: ['./create-comment.component.less']\n})\nexport class CreateCommentComponent implements OnInit {\n  @Input() comment: Comment;\n\n  @Output() addComment = new EventEmitter<Comment>();\n  @Output() removeComment = new EventEmitter<boolean>();\n\n  constructor() {\n  }\n\n  ngOnInit() {\n    setTimeout(() => {\n      const element = $(\"#name\");\n      if (element) {\n        element.focus();\n      }\n    }, 100);\n  }\n\n  onAddComment() {\n    this.addComment.emit(this.comment);\n  }\n\n  clearComment() {\n    this.removeComment.emit(true);\n  }\n\n  saveText(value: string) {\n    this.comment.text = value;\n  }\n\n  saveName(value: string) {\n    this.comment.userName = value;\n  }\n}\n","import {APP_INITIALIZER, ModuleWithProviders, NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {\n  Api,\n  CommonComponentsModule,\n  ConfigService,\n  ErrorInterceptorService, LoadingMaskInterceptorService, LoadingMaskService\n} from \"@groupdocs.examples.angular/common-components\";\nimport {AnnotationConfigService} from \"./annotation-config.service\";\nimport {HTTP_INTERCEPTORS, HttpClientModule} from \"@angular/common/http\";\nimport {FontAwesomeModule} from \"@fortawesome/angular-fontawesome\";\nimport {ClickOutsideModule} from \"ng-click-outside\";\nimport {AnnotationAppComponent} from './annotation-app.component';\nimport {library} from \"@fortawesome/fontawesome-svg-core\";\nimport {fas} from \"@fortawesome/free-solid-svg-icons\";\nimport {far} from \"@fortawesome/free-regular-svg-icons\";\nimport {AnnotationComponent} from './annotation/annotation.component';\nimport {ActiveAnnotationService} from \"./active-annotation.service\";\nimport {RemoveAnnotationService} from \"./remove-annotation.service\";\nimport {CommentAnnotationService} from \"./comment-annotation.service\";\nimport {CommentPanelComponent} from './comment-panel/comment-panel.component';\nimport {CommentComponent} from './comment/comment.component';\nimport {CreateCommentComponent} from './create-comment/create-comment.component';\n\nexport function initializeApp(annotationConfigService: AnnotationConfigService) {\n  const result = () => annotationConfigService.load();\n  return result;\n}\n\n// NOTE: this is required during library compilation see https://github.com/angular/angular/issues/23629#issuecomment-440942981\n// @dynamic\nexport function setupLoadingInterceptor(service: LoadingMaskService) {\n  return new LoadingMaskInterceptorService(service);\n}\n\n@NgModule({\n  declarations: [AnnotationAppComponent, AnnotationComponent, CommentPanelComponent, CommentComponent, CreateCommentComponent,\n  ],\n  exports: [CommonComponentsModule, AnnotationAppComponent, AnnotationComponent, CommentPanelComponent, CommentComponent, CreateCommentComponent],\n  imports:\n    [CommonModule,\n      CommonComponentsModule,\n      HttpClientModule,\n      FontAwesomeModule,\n      ClickOutsideModule],\n  providers:\n    [\n      ConfigService,\n      AnnotationConfigService,\n      ActiveAnnotationService,\n      RemoveAnnotationService,\n      CommentAnnotationService,\n      {\n        provide: HTTP_INTERCEPTORS,\n        useClass: ErrorInterceptorService,\n        multi: true\n      },\n      {\n        provide: APP_INITIALIZER,\n        useFactory: initializeApp,\n        deps: [AnnotationConfigService], multi: true\n      },\n      LoadingMaskService,\n      {\n        provide: HTTP_INTERCEPTORS,\n        useFactory: setupLoadingInterceptor,\n        multi: true,\n        deps: [LoadingMaskService]\n      }\n    ],\n  entryComponents: [AnnotationComponent],\n})\n\nexport class AnnotationModule {\n  constructor() {\n    library.add(fas, far);\n  }\n\n  static forRoot(apiEndpoint: string): ModuleWithProviders {\n    Api.DEFAULT_API_ENDPOINT = apiEndpoint;\n    return {\n      ngModule: AnnotationModule\n    };\n  }\n}\n"]}